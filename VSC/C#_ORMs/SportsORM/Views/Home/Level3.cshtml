<div class="card">
    <div class="card-header bg-dark text-light">Level 3</div>
    <div class="card-body">
        <p>Using the SportsORM, complete all the following queries and show their results on Level3.cshtml.</p>
        <ol>
            <li>
                <p>...all teams, past and present, that Samuel Evans has played with</p>
                <div>
                    @foreach (var team in ViewBag.AllTeamsWithSamuelEvans)

                    {
                        <p>@team.TeamOfPlayer.TeamName</p>

                    }
                </div>
            </li>
            <li>
                <p>...all players, past and present, with the Manitoba Tiger-Cats</p>

                <div>
                    @foreach (var player in ViewBag.AllTigerCats.AllPlayers)

                    {
                        <p>@player.PlayerOnTeam.FirstName @player.PlayerOnTeam.LastName</p>

                    }
                    <p></p>
                </div>
            </li>

            <li>
                <p>...all players who were formerly (but aren't currently) with the Wichita Vikings</p>
                <div class="d-flex justify-content-between">

                    <div>
                        <h2>Former Members</h2>
                        @foreach (var player in ViewBag.AllFormerVikings.AllPlayers)

                        {
                            <p>@player.PlayerOnTeam.FirstName @player.PlayerOnTeam.LastName
                                @player.PlayerOnTeam.CurrentTeam.TeamName </p>

                        }
                    </div>
                    <div>
                        <h2>Current Members</h2>
                        @foreach (var player in ViewBag.AllCurrentVikings.CurrentPlayers)

                        {
                            <p>@player.FirstName @player.LastName </p>

                        }
                    </div>
                </div>

            </li>

            <li><p>...every team that Jacob Gray played for before he joined the Oregon Colts</p>
            <div>
                @foreach (var team in ViewBag.JacobGray.AllTeams)
                {
                    <p>@team.TeamOfPlayer.TeamName</p>
                }
                    <p>@ViewBag.JacobGray.CurrentTeam.TeamName</p>
            </div>

            </li>
            

            <li><p>...everyone named "Joshua" who has ever played in the Atlantic Federation of Amateur Baseball Players</p>
            <div class="d-flex">
                <div style="width:50%;">
                    <h2>Joshuas in Atlantic Federation of Amateur Baseball Players</h2>
                    @foreach (var player in ViewBag.JoshuasAmateur)
                    {
                        <p>@player.FirstName @player.LastName</p>
                        <ul>
                            @foreach (var team in player.AllTeams)
                            {
                                <li>@team.TeamOfPlayer.CurrLeague.Name</li>
                            }
                        </ul>
                    }
                </div>
                <div>
                    <h2>All Joshuasand their leagues</h2>
                @foreach (var player in ViewBag.AllJoshuas)
                {
                    <p>@player.FirstName @player.LastName</p>
                    <ul>
                        @foreach (var team in player.AllTeams)
                        {
                            <li>@team.TeamOfPlayer.CurrLeague.Name</li>
                        }
                    </ul>
                }
                </div>
                @* @foreach (var league in ViewBag.JoshuasAmateur)
                {
                    <p>@league.Name</p>
                } *@
            </div>
            </li>
            <li><p>...all teams that have had 12 or more players, past and present. </p>
                <div>
                    @foreach (var team in ViewBag.TeamsWith12PlusPlayers)
                    {
                        <h3>@team.TeamName</h3>
                            <ol>
                                @foreach (var teamMember in team.AllPlayers)
                                {
                                    <li>@teamMember.PlayerOnTeam.FirstName @teamMember.PlayerOnTeam.LastName</li>
                                }
                            </ol>
                    }
                </div>
            </li>
                
            <li><p>...all players, sorted by the number of teams they've played for</p>
                <table class="table">
                    <tr>
                        <th>Player</th>
                        <th>no. of teams</th>
                        <th>Teams</th>

                    </tr>
                    @foreach (var player in ViewBag.AllPlayersByTeam)
                    {
                        <tr>
                            <td>@player.FirstName @player.LastName</td>
                            <td>@player.AllTeams.Count</td>
                            <td>
                                <ul>
                                    @foreach (var team in player.AllTeams)
                                    {
                                    <li>@team.TeamOfPlayer.TeamName</li>
                                    }
                                </ul>
                            </td>

                        </tr>
                    }
                </table>
            </li>
        </ol>
    </div>
</div>